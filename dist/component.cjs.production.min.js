"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("react"),e="@elm-react/component";function t(n){return"issues"===n?"https://github.com/Parasrah/elm-react-component/issues":n?"https://github.com/Parasrah/elm-react-component#"+n:"https://github.com/Parasrah/elm-react-component"}var r="We expected your opts to look like this:\n  {\n    path?: string[]\n  }",o=function(n){return"\n    "+e+" has experienced an internal error. please consider visiting\n    "+t("issues")+" and opening an issue with the following format:\n\n    title: internal error: "+n+"\n\n    description: <empty>\n    "},i={missingRef:o(1),duplicateInstance:o(2),missingInstance:o(3),missingPath:"\n  It looks like some options are missing!\n\n  "+r+"\n\n  \"path\" is only optional when you only have a single elm module. If you're seeing\n  this error, you've probably passed in more than one. You can figure out your path\n  by looking at the top of your elm module (file).\n\n  `module Elements.Button` translates to `path: ['Elements', 'Button']`\n\n  check out the readme for more information: "+t()+"\n  ",invalidElmInstance:'\n  "wrap" expects the following arguments:\n\n  wrap(elm: ElmInstance, opts?: Options)\n\n  The provided Elm instance does not match what we expected. Maybe you passed in\n  arguments in the wrong order?\n\n  You can view '+t("usage")+" for help\n  ",invalidPath:"\n  The path provided to "+e+"#wrap could not be\n  resolved to an Elm module.\n\n  For more information, please read "+t("opts")+"\n  ",pathRequired:"\n  There seems to be multiple elm modules in the elm instance\n  passed to "+e+"#wrap\n\n  For more information, please read "+t("opts")+"\n  ",missingPort:function(n){return"\n    "+e+": Unable to find a port for "+n+"\n\n    Maybe you passed in a function for an incoming port,\n    or an object/primitive for an outgoing port?\n\n    For more information, please read:\n\n    "+t("usage")+"\n\n    It's also possible an unforseen prop is being passed\n    into the elm component. You can read more here:\n\n    "+t("common-pitfalls")+"\n    "},invalidProps:"\n  "+e+": Elm components expect props to be an object\n  ",invalidOpts:"\n  The provided opts to "+e+"#wrap did not match what we expected.\n\n  Please provide opts in the following format:\n\n  "+r+"\n  "};function a(n){return!u(n)&&"object"==typeof n&&"function"==typeof n.init}function s(n){return"string"==typeof n&&!!n.length}function u(n){return null==n}var c=function(){var n=1,e=[];return{getClosure:function(n){return r=(t=e[n]).listeners,o=t.app,{sendData:function(n,e){var t;o.ports[n]&&(r[n]&&(o.ports[n].unsubscribe(r[n]),delete r[n]),(null===(t=o.ports[n])||void 0===t?void 0:t.send)?o.ports[n].send(e):console.warn(i.missingPort(n)))},addListener:function(n,e){var t;(null===(t=o.ports[n])||void 0===t?void 0:t.subscribe)?r[n]===e||(r[n]&&o.ports[n].unsubscribe(r[n]),o.ports[n].subscribe(e),r[n]=e):console.warn(i.missingPort(n))},clean:function(n){Object.keys(r).forEach((function(e){n.includes(e)||(o.ports[e].unsubscribe(r[e]),delete r[e])}))}};var t,r,o},createInstance:function(n,t){if(e[n])throw new Error(i.duplicateInstance);var r={app:t,listeners:{},subscriptions:[],timing:5};return e[n]=r,r},hasInstance:function(n){return!!e[n]},getId:function(){return++n},teardown:function(n){var t=e[n],r=t.listeners,o=t.app;Object.keys(r).forEach((function(n){o.ports[n].unsubscribe(r[n])}))}}}(),l=c.getClosure,p=c.createInstance,f=c.hasInstance,d=c.getId,m=c.teardown;exports.default=function(e,t){if(void 0===t&&(t={}),u(r=e)||"object"!=typeof r||null===r.Elm||"object"!=typeof r.Elm)throw new Error(i.invalidElmInstance);var r;if(!u(t)&&!function(n){if(u(n))return!1;if("object"!=typeof n)return!1;var e=n.path;return!!(u(e)||Array.isArray(e)&&e.every(s))}(t))throw new Error(i.invalidOpts);return function(r){if(!function(n){return!u(n)&&"function"!=typeof n&&"object"==typeof n}(r))throw new Error(i.invalidProps);var o=n.useState(d())[0],s=n.useRef(null);return n.useEffect((function(){if(s.current){var n=document.createElement("div");s.current.appendChild(n);var c=function(){var n,r;if(null===(n=t.path)||void 0===n?void 0:n.length){var o=(void 0===(r=t.path)&&(r=[]),function n(e,t){if(0===e.length&&a(t))return t;if(0===e.length||void 0===t)return!1;var r=e[0],o=e.slice(1);return!!function n(e,t){if(u(e))return!1;if("object"!=typeof e)return!1;if(""===t)return!1;if(t){var r=e[t];return n(r)||a(r)}return!!Object.keys(e).length}(t,r)&&n(o,t[r])}(r,e.Elm));if(o)return o;throw new Error(i.invalidPath)}var s=function n(e){if(a(e))return e;var t,r=!((t=Object.values(e)).length>1)&&!(t.length<1)&&(t[0]||!1);return!!r&&n(r)}(e.Elm);if(s)return s;throw new Error(i.pathRequired)}().init({node:n,flags:function(){var n={};for(var e in r)"function"!=typeof r[e]&&(n[e]=r[e]);return n}()});return p(o,c),function(){return m(o)}}}),[s]),n.useEffect((function(){if(f(o)){var n=l(o),e=n.addListener,t=n.sendData,a=n.clean,s=Object.keys(r);s.filter((function(n){return"function"!=typeof r[n]})).forEach((function(n){return t(n,r[n])})),s.filter((function(n){return"function"==typeof r[n]})).forEach((function(n){return e(n,r[n])})),a(s)}else console.error(i.missingInstance)})),n.createElement("div",{ref:s})}};
//# sourceMappingURL=component.cjs.production.min.js.map
